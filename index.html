<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–¢–∏—Ä-–ª–∏—Å—Ç –ò–≥—Ä</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background: #f5f5f5;
            padding: 10px;
            max-width: 600px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            color: white;
            border-radius: 12px;
            margin-bottom: 20px;
        }
        .welcome {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            color: white;
            border-radius: 15px;
            margin-bottom: 25px;
        }
        .start-btn {
            display: block;
            width: 100%;
            padding: 16px;
            background: white;
            color: #2c3e50;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
        }
        .theme-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }
        .theme-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.2s;
        }
        .theme-card:hover {
            transform: translateY(-4px);
        }
        .theme-img {
            width: 100%;
            height: 120px;
            background: #eee;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #777;
            font-size: 12px;
        }
        .theme-title {
            padding: 12px;
            text-align: center;
            font-weight: bold;
            font-size: 16px;
            color: #333;
        }
        .game-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .game-img {
            width: 80px;
            height: 80px;
            background: #eee;
            border-radius: 8px;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #777;
            font-size: 12px;
        }
        .game-name {
            font-size: 20px;
            font-weight: bold;
            margin: 10px 0;
        }
        .tier-list {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .tier-header {
            padding: 12px 20px;
            color: white;
            font-weight: bold;
            font-size: 18px;
        }
        .tier-goat { background: #4CAF50; }
        .tier-good { background: #8BC34A; }
        .tier-norm { background: #FF9800; }
        .tier-bad { background: #F44336; }
        .tier-items {
            padding: 15px;
        }
        .tier-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: #f9f9f9;
            margin-bottom: 8px;
            border-radius: 8px;
        }
        .rating-bar {
            width: 100px;
            height: 8px;
            background: #eee;
            border-radius: 4px;
            position: relative;
        }
        .rating-fill {
            height: 100%;
            border-radius: 4px;
            position: absolute;
            left: 0;
            top: 0;
        }
        .result-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 20px;
        }
        .action-btn {
            padding: 14px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            color: white;
            text-align: center;
        }
        .btn-theme { background: #6a5acd; }
        .btn-retry { background: #4caf50; }
        .btn-rating { background: #ff9800; }
        .btn-share { background: #e91e63; }
        .exclusive {
            text-align: center;
            padding: 12px;
            background: #2c3e50;
            color: white;
            font-size: 14px;
            border-radius: 8px;
            margin-top: 20px;
            font-weight: bold;
        }
        .categories {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 20px;
        }
        .cat-btn {
            padding: 14px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            color: white;
            opacity: 0.85;
        }
        .cat-btn:hover { opacity: 1; }
        .cat-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }
        .goty-btn { background: #4caf50; }
        .excellent-btn { background: #2196f3; }
        .okay-btn { background: #ff9800; }
        .trash-btn { background: #f44336; }
        .limits {
            display: flex;
            justify-content: space-around;
            margin: 15px 0;
            font-size: 13px;
        }
        .limit-box { text-align: center; }
        .limit-title { font-weight: bold; margin-bottom: 3px; }
        .limit-count { font-size: 16px; font-weight: bold; }
        .progress { text-align: center; margin: 15px 0; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üéÆ –¢–∏—Ä-–ª–∏—Å—Ç –ò–≥—Ä</h1>
    </div>

    <div id="app"></div>

    <script>
        // === –ù–ê–°–¢–†–û–ô–ö–ò –¢–ò–†-–õ–ò–°–¢–û–í ===
        const THEMES = {
            metroidvania: {
                title: "–ú–µ—Ç—Ä–æ–∏–¥–≤–∞–Ω–∏–∏",
                // –õ–ò–ú–ò–¢–´ ‚Äî –º–µ–Ω—è—Ç—å –º–æ–∂–Ω–æ –∑–¥–µ—Å—å!
                limits: { goty: 1, excellent: 5, okay: 7, trash: 7 },
                games: [
                    { name: "Hollow Knight", img: "Hollow Knight" },
                    { name: "Metroid Dread", img: "Metroid Dread" },
                    { name: "Blasphemous", img: "Blasphemous" },
                    { name: "Celeste", img: "Celeste" },
                    { name: "Dead Cells", img: "Dead Cells" },
                    { name: "Ori and the Blind Forest", img: "Ori" },
                    { name: "Katana ZERO", img: "Katana ZERO" },
                    { name: "The Messenger", img: "The Messenger" },
                    { name: "Axiom Verge", img: "Axiom Verge" },
                    { name: "Castlevania: SotN", img: "Castlevania" },
                    { name: "Grime", img: "Grime" },
                    { name: "Ender Lilies", img: "Ender Lilies" },
                    { name: "Infernax", img: "Infernax" },
                    { name: "Dandara", img: "Dandara" },
                    { name: "Unsighted", img: "Unsighted" },
                    { name: "Timespinner", img: "Timespinner" },
                    { name: "Monster Boy", img: "Monster Boy" },
                    { name: "Shadow Complex", img: "Shadow Complex" },
                    { name: "Aeterna Noctis", img: "Aeterna Noctis" },
                    { name: "Bloodstained", img: "Bloodstained" }
                ]
            },
            rpg: {
                title: "–†–æ–ª–µ–≤—ã–µ –∏–≥—Ä—ã (RPG)",
                limits: { goty: 2, excellent: 6, okay: 6, trash: 6 },
                games: [
                    { name: "The Witcher 3", img: "Witcher 3" },
                    { name: "Baldur's Gate 3", img: "BG3" },
                    { name: "Elden Ring", img: "Elden Ring" },
                    { name: "Disco Elysium", img: "Disco Elysium" },
                    { name: "Cyberpunk 2077", img: "Cyberpunk" },
                    { name: "Persona 5 Royal", img: "P5R" },
                    { name: "Mass Effect 2", img: "ME2" },
                    { name: "Fallout: NV", img: "Fallout NV" },
                    { name: "Divinity: OS2", img: "Divinity" },
                    { name: "Xenoblade", img: "Xenoblade" },
                    { name: "Final Fantasy VII", img: "FF7" },
                    { name: "Dragon Age: Inq", img: "DAI" },
                    { name: "Genshin Impact", img: "Genshin" },
                    { name: "Starfield", img: "Starfield" },
                    { name: "Kingdom Come", img: "KC" },
                    { name: "NieR: Automata", img: "NieR" },
                    { name: "Tales of Arise", img: "ToA" },
                    { name: "Octopath Traveler", img: "Octopath" },
                    { name: "Pillars of Eternity", img: "PoE" },
                    { name: "Dark Souls III", img: "DS3" }
                ]
            }
            // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –µ—â—ë —Ç–µ–º—ã
        };

        // === –°–û–°–¢–û–Ø–ù–ò–ï ===
        let currentThemeKey = null;
        let assigned = { goty: [], excellent: [], okay: [], trash: [] };
        let currentIndex = 0;

        // === –≠–ö–†–ê–ù–´ ===
        function showWelcome() {
            document.getElementById('app').innerHTML = `
                <div class="welcome">
                    <h2>üëã –ü—Ä–∏–≤–µ—Ç, –≥–µ–π–º–µ—Ä!</h2>
                    <p>–°–æ–∑–¥–∞–π —Å–≤–æ–π —Ç–∏—Ä-–ª–∏—Å—Ç –ø–æ –ª—é–±–∏–º—ã–º –∏–≥—Ä–∞–º</p>
                    <button class="start-btn" onclick="showThemeSelect()">–ù–∞—á–∞—Ç—å ‚Üí</button>
                </div>
                <div class="exclusive">–≠–∫—Å–∫–ª—é–∑–∏–≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ Fan Games</div>
            `;
        }

        function showThemeSelect() {
            let html = `<h2 style="text-align:center;margin:20px 0;">–í—ã–±–µ—Ä–∏ —Ç–µ–º—É:</h2><div class="theme-grid">`;
            for (const [key, theme] of Object.entries(THEMES)) {
                html += `
                    <div class="theme-card" onclick="startTheme('${key}')">
                        <div class="theme-img">–ö–∞—Ä—Ç–∏–Ω–∫–∞: ${theme.title}</div>
                        <div class="theme-title">üéÆ ${theme.title}</div>
                    </div>
                `;
            }
            html += `</div><div class="exclusive">–≠–∫—Å–∫–ª—é–∑–∏–≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ Fan Games</div>`;
            document.getElementById('app').innerHTML = html;
        }

        function startTheme(themeKey) {
            currentThemeKey = themeKey;
            const limits = THEMES[themeKey].limits;
            assigned = { goty: [], excellent: [], okay: [], trash: [] };
            currentIndex = 0;
            renderGameScreen();
        }

        function updateLimitsUI() {
            const limits = THEMES[currentThemeKey].limits;
            const used = {
                goty: assigned.goty.length,
                excellent: assigned.excellent.length,
                okay: assigned.okay.length,
                trash: assigned.trash.length
            };
            const html = `
                <div class="limits">
                    <div class="limit-box"><div class="limit-title">GOTY</div><div class="limit-count">${used.goty}/${limits.goty}</div></div>
                    <div class="limit-box"><div class="limit-title">–û—Ç–ª–∏—á–Ω–æ</div><div class="limit-count">${used.excellent}/${limits.excellent}</div></div>
                    <div class="limit-box"><div class="limit-title">–¢–µ—Ä–ø–∏–º–æ</div><div class="limit-count">${used.okay}/${limits.okay}</div></div>
                    <div class="limit-box"><div class="limit-title">–ú—É—Å–æ—Ä</div><div class="limit-count">${used.trash}/${limits.trash}</div></div>
                </div>
            `;
            document.getElementById('limits-container').innerHTML = html;
        }

        function renderGameScreen() {
            const theme = THEMES[currentThemeKey];
            if (currentIndex >= theme.games.length) {
                renderResults();
                return;
            }

            const game = theme.games[currentIndex];
            const limits = theme.limits;
            const used = {
                goty: assigned.goty.length,
                excellent: assigned.excellent.length,
                okay: assigned.okay.length,
                trash: assigned.trash.length
            };

            const disabled = {
                goty: used.goty >= limits.goty,
                excellent: used.excellent >= limits.excellent,
                okay: used.okay >= limits.okay,
                trash: used.trash >= limits.trash
            };

            document.getElementById('app').innerHTML = `
                <div class="progress">${theme.title} ‚Ä¢ –ò–≥—Ä–∞ ${currentIndex + 1} –∏–∑ ${theme.games.length}</div>
                <div class="game-card">
                    <div class="game-img">${game.img}</div>
                    <div class="game-name">${game.name}</div>
                    <div id="limits-container"></div>
                    <div class="categories">
                        <button class="cat-btn goty-btn" ${disabled.goty ? 'disabled' : ''} onclick="assign('goty')">GOTY</button>
                        <button class="cat-btn excellent-btn" ${disabled.excellent ? 'disabled' : ''} onclick="assign('excellent')">–û—Ç–ª–∏—á–Ω–æ</button>
                        <button class="cat-btn okay-btn" ${disabled.okay ? 'disabled' : ''} onclick="assign('okay')">–¢–µ—Ä–ø–∏–º–æ</button>
                        <button class="cat-btn trash-btn" ${disabled.trash ? 'disabled' : ''} onclick="assign('trash')">–ú—É—Å–æ—Ä</button>
                    </div>
                </div>
                <div class="exclusive">–≠–∫—Å–∫–ª—é–∑–∏–≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ Fan Games</div>
            `;
            updateLimitsUI();
        }

        function assign(category) {
            const game = THEMES[currentThemeKey].games[currentIndex];
            assigned[category].push(game);
            currentIndex++;
            renderGameScreen();
        }

        function renderResults() {
            const theme = THEMES[currentThemeKey];
            let html = `
                <div style="text-align:center;margin-bottom:20px;">
                    <h2>–¢–ò–†-–õ–ò–°–¢ "${theme.title}"</h2>
                </div>
            `;

            const tiers = [
                { key: 'goty', title: 'GOTY', class: 'tier-goat' },
                { key: 'excellent', title: '–û—Ç–ª–∏—á–Ω–æ', class: 'tier-good' },
                { key: 'okay', title: '–¢–µ—Ä–ø–∏–º–æ', class: 'tier-norm' },
                { key: 'trash', title: '–ú—É—Å–æ—Ä', class: 'tier-bad' }
            ];

            tiers.forEach(t => {
                if (assigned[t.key].length > 0) {
                    html += `<div class="tier-list">
                        <div class="tier-header ${t.class}">${t.title}</div>
                        <div class="tier-items">
                            ${assigned[t.key].map(g => `<div class="tier-item">${g.name}</div>`).join('')}
                        </div>
                    </div>`;
                }
            });

            html += `
                <div class="result-actions">
                    <button class="action-btn btn-theme" onclick="showThemeSelect()">–î—Ä—É–≥–∞—è —Ç–µ–º–∞</button>
                    <button class="action-btn btn-retry" onclick="startTheme('${currentThemeKey}')">–ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å</button>
                    <button class="action-btn btn-rating" onclick="showRating()">–†–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤</button>
                    <div style="position:relative; margin-top:15px;">
                        <span style="position:absolute; top:-12px; left:50%; transform:translateX(-50%); background:#ff6b6b; color:white; font-size:10px; padding:3px 8px; border-radius:12px; white-space:nowrap; z-index:10;">–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</span>
                        <button class="action-btn btn-share" disabled style="opacity:0.6; cursor:not-allowed;">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
                    </div>
                </div>
                <div class="exclusive">–≠–∫—Å–∫–ª—é–∑–∏–≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ Fan Games</div>
            `;

            document.getElementById('app').innerHTML = html;
        }

        function showRating() {
            const theme = THEMES[currentThemeKey];
            let html = `
                <div style="text-align:center;margin-bottom:20px;">
                    <h2>–†–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤</h2>
                    <p>${theme.title}</p>
                </div>
                <div class="tier-list">
                    <div class="tier-header tier-goat">GOTY</div>
                    <div class="tier-items">
                        ${theme.games.map(g => {
                            const p = Math.floor(Math.random() * 100);
                            const c = p > 70 ? '#4caf50' : p > 40 ? '#ff9800' : '#f44336';
                            return `
                                <div class="tier-item">
                                    <span>${g.name}</span>
                                    <div class="rating-bar">
                                        <div class="rating-fill" style="width:${p}%;background:${c}"></div>
                                    </div>
                                    <span>${p}%</span>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
                <button class="action-btn btn-theme" onclick="renderResults()" style="width:100%;margin-top:20px;">‚Üê –ù–∞–∑–∞–¥</button>
                <div class="exclusive">–≠–∫—Å–∫–ª—é–∑–∏–≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ Fan Games</div>
            `;
            document.getElementById('app').innerHTML = html;
        }

        function share() {
            const theme = THEMES[currentThemeKey].title;
            const channelLink = "https://t.me/fan_games_channel"; // ‚Üê –ó–ê–ú–ï–ù–ò–¢–ï –Ω–∞ –≤–∞—à—É —Å—Å—ã–ª–∫—É!
            const appLink = window.location.href;

            const text = `–¢–ò–†-–õ–ò–°–¢ "${theme}"\n–°–æ–±–µ—Ä–∏ —Å–≤–æ–π –∏ –¥–µ–ª–∏—Å—å —Å –¥—Ä—É–∑—å—è–º–∏ –≤ ${channelLink}\n\n–°–æ–∑–¥–∞—Ç—å —Å–≤–æ–π —Ç–∏—Ä-–ª–∏—Å—Ç ‚Üí ${appLink}`;

            if (navigator.share) {
                navigator.share({ title: '–ú–æ–π —Ç–∏—Ä-–ª–∏—Å—Ç', text }).catch(() => copyText(text));
            } else {
                copyText(text);
            }
        }

        function copyText(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('‚úÖ –¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!\n–û—Ç–ø—Ä–∞–≤—å –µ–≥–æ –≤ Telegram.');
            });
        }

        // –°–¢–ê–†–¢
        showWelcome();
    </script>
</body>
</html>
