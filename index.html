<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–¢–∏—Ä-–ª–∏—Å—Ç –ò–≥—Ä</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background: #f5f5f5;
            padding: 10px;
            max-width: 600px;
            margin: 0 auto;
        }

        /* === –ü–†–ò–í–ï–¢–°–¢–í–ï–ù–ù–´–ô –≠–ö–†–ê–ù === */
        .welcome-container {
            text-align: center;
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            color: white;
            border-radius: 12px;
            padding: 60px 20px;
            height: calc(100vh - 60px);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .logo-placeholder {
            width: 100px;
            height: 100px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }
        .welcome h1 {
            font-size: 32px;
            margin: 30px 0 15px;
        }
        .welcome p {
            font-size: 16px;
            opacity: 0.9;
            margin-bottom: 40px;
        }
        .welcome-actions {
            margin-top: auto;
        }
        .start-btn, .rules-btn {
            display: block;
            width: 100%;
            padding: 16px;
            background: white;
            color: #2c3e50;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin-bottom: 12px;
        }

        /* === –ü–†–û–ì–†–ï–°–° –ë–ê–† === */
        .progress-bar-container {
            width: 100%;
            height: 10px;
            background: #eee;
            border-radius: 5px;
            position: relative;
            overflow: hidden;
            margin: 15px 0;
        }
        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #ffeb3b, #ff9800);
            border-radius: 5px;
            transition: width 0.4s ease;
        }
        .trophy-marker {
            position: absolute;
            top: -10px;
            width: 30px;
            height: 30px;
            background-image: url('image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%23FFD700" d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/><circle cx="12" cy="12" r="4" fill="%23FFD700"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            transform: translateX(-50%);
            transition: left 0.4s ease;
        }
        .progress-label {
            text-align: center;
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }

        /* === –í–´–ë–û–† –¢–ï–ú === */
        .theme-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }
        .theme-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.2s;
        }
        .theme-card:hover {
            transform: translateY(-4px);
        }
        .theme-img {
            width: 100%;
            height: 120px;
            background: #eee;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #777;
            font-size: 12px;
        }
        .theme-title {
            padding: 12px;
            text-align: center;
            font-weight: bold;
            font-size: 16px;
            color: #333;
        }

        /* === –ö–ê–†–¢–û–ß–ö–ê –ò–ì–†–´ === */
        .game-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .game-header {
            text-align: center;
            margin-bottom: 15px;
        }
        .game-img {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            margin: 0 auto 15px;
            object-fit: cover;
        }
        .game-name {
            font-size: 20px;
            font-weight: bold;
            margin: 10px 0;
        }
        .game-desc {
            font-size: 14px;
            color: #666;
            margin-top: 10px;
            padding: 10px;
            background: #f9f9f9;
            border-radius: 8px;
        }

        /* === –ö–ù–û–ü–ö–ò –û–¶–ï–ù–ö–ò === */
        .categories {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 20px;
        }
        .cat-btn {
            padding: 14px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            color: white;
            opacity: 0.85;
        }
        .cat-btn:hover { opacity: 1; }
        .s-btn { background: #4caf50; }
        .a-btn { background: #8bc34a; }
        .b-btn { background: #ff9800; }
        .c-btn { background: #ffcc80; }
        .d-btn { background: #f44336; }
        .not-played-btn { background: #757575; }
        .skip-btn { background: #9e9e9e; }

        /* === –ù–ê–í–ò–ì–ê–¶–ò–Ø === */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .back-btn, .back-to-main-btn {
            padding: 10px 15px;
            background: #9e9e9e;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
        }
        .back-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        /* === –†–ï–ó–£–õ–¨–¢–ê–¢ === */
        .tier-list {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .tier-header {
            padding: 12px 20px;
            color: white;
            font-weight: bold;
            font-size: 18px;
        }
        .tier-s { background: #4CAF50; }
        .tier-a { background: #8BC34A; }
        .tier-b { background: #FF9800; }
        .tier-c { background: #FFCC80; }
        .tier-d { background: #F44336; }
        .tier-items {
            padding: 15px;
        }
        .tier-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: #f9f9f9;
            margin-bottom: 8px;
            border-radius: 8px;
        }

        /* === –î–ï–ô–°–¢–í–ò–Ø === */
        .result-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 20px;
        }
        .action-btn {
            padding: 14px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            color: white;
            text-align: center;
        }
        .btn-theme { background: #6a5acd; }
        .btn-retry { background: #4caf50; }
        .btn-rating { background: #ff9800; }
        .btn-share { background: #e91e63; }

        /* === –ü–†–ê–í–ò–õ–ê === */
        .rules-content {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            line-height: 1.6;
        }
        .rules-content h3 {
            margin: 15px 0 10px;
        }
        .rules-content ul {
            padding-left: 20px;
            margin-bottom: 15px;
        }
        .rules-content li {
            margin-bottom: 8px;
        }

        /* === AWARDS === */
        .awards-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .award-question {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
        }
        .award-games {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 8px;
            overflow-y: auto;
            max-height: 400px;
        }
        .award-game {
            background: #fff;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: background 0.2s;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            height: 160px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            overflow: hidden;
        }
        .award-game:hover {
            background: #e0e0e0;
        }
        .award-img {
            width: 60px;
            height: 60px;
            border-radius: 6px;
            margin: 0 auto 8px;
            object-fit: cover;
        }
        .award-game-name {
            font-size: 14px;
            word-wrap: break-word;
            line-height: 1.4;
            text-align: center;
            max-height: 40px;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        /* === –ö–û–ü–ò–†–ê–ô–¢ === */
        .copyright {
            text-align: center;
            margin-top: 30px;
            font-size: 13px;
            color: #666;
        }
        .dev-logos {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
        }
        .dev-logo {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #555;
        }
        .version {
            text-align: center;
            font-size: 12px;
            color: #999;
            margin-top: 5px;
        }

        /* === –ú–û–ë–ò–õ–¨–ù–´–ô === */
        @media (max-width: 480px) {
            .welcome-container {
                padding: 40px 15px;
                height: calc(100vh - 50px);
            }
            .logo-placeholder {
                width: 80px;
                height: 80px;
            }
            .welcome h1 {
                font-size: 26px;
                margin: 20px 0 10px;
            }
            .award-games {
                grid-template-columns: repeat(2, 1fr);
            }
            .award-game {
                height: 140px;
                padding: 8px;
            }
            .award-img {
                width: 50px;
                height: 50px;
            }
            .award-game-name {
                font-size: 13px;
                max-height: 36px;
            }
            .game-img {
                width: 60px;
                height: 60px;
            }
            .game-name {
                font-size: 18px;
            }
            .cat-btn {
                font-size: 14px;
                padding: 12px;
            }
        }
    </style>
</head>
<body>

    <div id="app"></div>

    <div class="copyright">
        –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–ª—è FanGames
        <div class="dev-logos">
            <div class="dev-logo">FG</div>
            <div class="dev-logo">FS</div>
        </div>
        <div class="version">–í–µ—Ä—Å–∏—è 1.1</div>
    </div>

    <script>
        const THEMES = {
            rpg: {
                title: "–†–æ–ª–µ–≤—ã–µ –∏–≥—Ä—ã (RPG)",
                img: "https://images.unsplash.com/photo-1511512578047-dfb367046420?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                hasNotPlayed: true,
                games: [
                    { name: "Baldur's Gate 3", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co6m6u.jpg", desc: "–≠–ø–∏—á–µ—Å–∫–∞—è RPG —Å –≥–ª—É–±–æ–∫–æ–π —Å–∏—Å—Ç–µ–º–æ–π –±–æ–µ–≤ –∏ –¥–∏–∞–ª–æ–≥–æ–≤." },
                    { name: "The Witcher 3", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co1xqo.jpg", desc: "–ò—Å—Ç–æ—Ä–∏—è –ì–µ—Ä–∞–ª—å—Ç–∞ –≤ –º–∏—Ä–µ –º–æ–Ω—Å—Ç—Ä–æ–≤ –∏ –ø–æ–ª–∏—Ç–∏–∫–∏." },
                    { name: "Elden Ring", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co6n2r.jpg", desc: "–û—Ç —Å–æ–∑–¥–∞—Ç–µ–ª–µ–π Dark Souls ‚Äî –æ—Ç–∫—Ä—ã—Ç—ã–π –º–∏—Ä –∏ —Å–ª–æ–∂–Ω—ã–µ –±–æ—Å—Å—ã." },
                    { name: "Disco Elysium", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2i9w.jpg", desc: "–£–Ω–∏–∫–∞–ª—å–Ω–∞—è RPG —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –¥–∏–∞–ª–æ–≥–∞—Ö –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º –º–∏—Ä–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞." },
                    { name: "Cyberpunk 2077", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5q.jpg", desc: "–ë—É–¥—É—â–µ–µ, –∫–∏–±–µ—Ä–ø–∞–Ω–∫ –∏ –∏—Å—Ç–æ—Ä–∏—è –í–∏." },
                    { name: "Persona 5 Royal", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5l.jpg", desc: "–®–∫–æ–ª—å–Ω–∞—è –∂–∏–∑–Ω—å –∏ —Ç–∞–π–Ω—ã–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è –≤ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–º –º–∏—Ä–µ." },
                    { name: "Mass Effect 2", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5p.jpg", desc: "–ö–æ—Å–º–∏—á–µ—Å–∫–∞—è —ç–ø–æ–ø–µ—è —Å –≤—ã–±–æ—Ä–æ–º –∏ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è–º–∏." },
                    { name: "Fallout: New Vegas", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5v.jpg", desc: "–ü–æ—Å—Ç–∞–ø–æ–∫–∞–ª–∏–ø—Ç–∏—á–µ—Å–∫–∏–π –ó–∞–ø–∞–¥ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –∫–æ–Ω—Ü–æ–≤–æ–∫." },
                    { name: "Divinity: Original Sin 2", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j1k.jpg", desc: "–ì–ª—É–±–æ–∫–∞—è —Ç–∞–∫—Ç–∏—á–µ—Å–∫–∞—è RPG —Å –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–æ–º." },
                    { name: "Starfield", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co6n2s.jpg", desc: "–ü–µ—Ä–≤–∞—è –∫–æ—Å–º–∏—á–µ—Å–∫–∞—è RPG –æ—Ç Bethesda." },
                    { name: "Dragon Age: Inquisition", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2z3a.jpg", desc: "–≠–ø–∏—á–µ—Å–∫–∞—è –∏—Å—Ç–æ—Ä–∏—è –æ —Å–ø–∞—Å–µ–Ω–∏–∏ –º–∏—Ä–∞ –æ—Ç —Ö–∞–æ—Å–∞." },
                    { name: "NieR: Automata", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5t.jpg", desc: "–§–∏–ª–æ—Å–æ—Ñ—Å–∫–∞—è –∏—Å—Ç–æ—Ä–∏—è –∞–Ω–¥—Ä–æ–∏–¥–æ–≤ –≤ –ø–æ—Å—Ç–∞–ø–æ–∫–∞–ª–∏–ø—Ç–∏—á–µ—Å–∫–æ–º –º–∏—Ä–µ." },
                    { name: "Kingdom Come: Deliverance", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5m.jpg", desc: "–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è —Å—Ä–µ–¥–Ω–µ–≤–µ–∫–æ–≤–∞—è RPG." },
                    { name: "Pillars of Eternity", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5n.jpg", desc: "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è RPG –≤ –¥—É—Ö–µ Baldur's Gate." },
                    { name: "Tales of Arise", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5o.jpg", desc: "–Ø—Ä–∫–∞—è JRPG —Å –∫—Ä–∞—Å–∏–≤–æ–π –≥—Ä–∞—Ñ–∏–∫–æ–π –∏ —Å—é–∂–µ—Ç–æ–º." },
                    { name: "Octopath Traveler", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5r.jpg", desc: "–†–µ—Ç—Ä–æ-—Å—Ç–∏–ª—å –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏." },
                    { name: "Xenoblade Chronicles", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5u.jpg", desc: "–û–≥—Ä–æ–º–Ω—ã–π –º–∏—Ä –∏ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—â–∏–π —Å—é–∂–µ—Ç." },
                    { name: "Genshin Impact", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5v.jpg", desc: "–û—Ç–∫—Ä—ã—Ç—ã–π –º–∏—Ä, —ç–ª–µ–º–µ–Ω—Ç—ã –∏ –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∏–≥—Ä–∞." },
                    { name: "Dark Souls III", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5s.jpg", desc: "–°–ª–æ–∂–Ω–∞—è –∏ –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω–∞—è RPG." },
                    { name: "Final Fantasy VII Remake", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2g3t.jpg", desc: "–†–µ–º–µ–π–∫ –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–π RPG." }
                ]
            },
            roguelike: {
                title: "–†–æ–≥–∞–ª–∏–∫–∏",
                img: "https://images.unsplash.com/photo-1542751371-adc38448a05e?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                hasNotPlayed: true,
                games: [
                    { name: "Hades", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co6n2t.jpg", desc: "–ë–æ–≥–∏ –û–ª–∏–º–ø–∞ –ø–æ–º–æ–≥–∞—é—Ç –≤–∞–º –≤—ã–±—Ä–∞—Ç—å—Å—è –∏–∑ –ê–¥–∞." },
                    { name: "Dead Cells", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5w.jpg", desc: "–ë—ã—Å—Ç—Ä–∞—è –∏ –∂–µ—Å—Ç–æ–∫–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ—Ä-RPG." },
                    { name: "Slay the Spire", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5x.jpg", desc: "–ö–∞—Ä—Ç–æ—á–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Å —Ä–æ–≥–∞–ª–∏–∫–æ–≤—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏." },
                    { name: "Returnal", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5y.jpg", desc: "–ù–∞—É—á–Ω–æ-—Ñ–∞–Ω—Ç–∞—Å—Ç–∏—á–µ—Å–∫–∏–π —à—É—Ç–µ—Ä —Å –ø–µ—Ç–ª–µ–π –≤—Ä–µ–º–µ–Ω–∏." },
                    { name: "Risk of Rain 2", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5z.jpg", desc: "–ö–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–π —à—É—Ç–µ—Ä —Å –ø—Ä–æ–∫–∞—á–∫–æ–π." },
                    { name: "Spelunky 2", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j60.jpg", desc: "–ö–ª–∞—Å—Å–∏–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ—Ä–æ–≤ —Å –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π." },
                    { name: "Enter the Gungeon", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j61.jpg", desc: "–î–∞–Ω–∂–æ–Ω-–∫—Ä–æ–ª–ª–µ—Ä —Å –ø–∏—Å—Ç–æ–ª–µ—Ç–∞–º–∏ –∏ –±–æ—Å—Å–∞–º–∏." },
                    { name: "Vampire Survivors", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co6n2u.jpg", desc: "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–≥—Ä–∞, –≥–¥–µ –≤—ã –ø—Ä–æ—Å—Ç–æ —É–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç–µ—Å—å." },
                    { name: "The Binding of Isaac", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j62.jpg", desc: "–ñ–µ—Å—Ç–æ–∫–∏–π –∏ —Å—Ç—Ä–∞–Ω–Ω—ã–π —Ä–æ–≥–∞–ª–∏–∫." },
                    { name: "Rogue Legacy 2", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co6n2v.jpg", desc: "–†–æ–≥–∞–ª–∏–∫ —Å –Ω–∞—Å–ª–µ–¥–∏–µ–º –∏ –∫–ª–∞—Å—Å–∞–º–∏." },
                    { name: "FTL: Faster Than Light", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j63.jpg", desc: "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∞–±–ª—ë–º –≤ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–º —Ä–æ–≥–∞–ª–∏–∫–µ." },
                    { name: "Nuclear Blaze", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co6n2w.jpg", desc: "–ü–æ–∂–∞—Ä–Ω—ã–π –≤ –æ–ø–∞—Å–Ω–æ–º –∑–¥–∞–Ω–∏–∏." },
                    { name: "Loop Hero", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co6n2x.jpg", desc: "–°—Ç—Ä–∞—Ç–µ–≥–∏—è, –≥–¥–µ –≤—ã —Å–æ–∑–¥–∞—ë—Ç–µ –∫–∞—Ä—Ç—É." },
                    { name: "Cult of the Lamb", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co6n2y.jpg", desc: "–†–æ–≥–∞–ª–∏–∫ —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ —Ö—Ä–∞–º–∞." },
                    { name: "20 Minutes Till Dawn", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co6n2z.jpg", desc: "–í—ã–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Ç–∏–≤ –≤–æ–ª–Ω –º–æ–Ω—Å—Ç—Ä–æ–≤." },
                    { name: "Brotato", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co6n30.jpg", desc: "–†–æ–≥–∞–ª–∏–∫ —Å 100+ –ø–µ—Ä–∫–∞–º–∏." },
                    { name: "Katana ZERO", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j64.jpg", desc: "–°—Ç–∏–ª—å–Ω—ã–π —ç–∫—à–µ–Ω —Å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ö–∞–Ω–∏–∫–æ–π." },
                    { name: "Noita", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j65.jpg", desc: "–ú–∞–≥–∏—è, —Ñ–∏–∑–∏–∫–∞ –∏ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç—å." },
                    { name: "NeuroVoider", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j66.jpg", desc: "–®—É—Ç–µ—Ä —Å —Ä–æ–≥–∞–ª–∏–∫–æ–≤—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏." },
                    { name: "Wizard of Legend", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j67.jpg", desc: "–ú–∞–≥–∏—á–µ—Å–∫–∏–µ –¥—É—ç–ª–∏ –≤ –ø–æ–¥–∑–µ–º–µ–ª—å—è—Ö." }
                ]
            },
            metroidvania: {
                title: "–ú–µ—Ç—Ä–æ–∏–¥–≤–∞–Ω–∏–∏",
                img: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                hasNotPlayed: true,
                games: [
                    { name: "Hollow Knight", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j68.jpg", desc: "–¢—ë–º–Ω—ã–π –∏ –∫—Ä–∞—Å–∏–≤—ã–π –º–∏—Ä –Ω–∞—Å–µ–∫–æ–º—ã—Ö." },
                    { name: "Metroid Dread", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co6n31.jpg", desc: "–í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –°–∞–º—É—Å –≤ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–º —Å—Ç–∏–ª–µ." },
                    { name: "Castlevania: Symphony of the Night", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j69.jpg", desc: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è –º–µ—Ç—Ä–æ–∏–¥–≤–∞–Ω–∏—è." },
                    { name: "Axiom Verge", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j6a.jpg", desc: "–†–µ—Ç—Ä–æ-—Å—Ç–∏–ª—å —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è–º–∏." },
                    { name: "Blasphemous", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j6b.jpg", desc: "–¢—ë–º–Ω–∞—è –∏ –∂–µ—Å—Ç–æ–∫–∞—è –º–µ—Ç—Ä–æ–∏–¥–≤–∞–Ω–∏—è." },
                    { name: "Dead Cells", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5w.jpg", desc: "–°–º–µ—Å—å –º–µ—Ç—Ä–æ–∏–¥–≤–∞–Ω–∏–∏ –∏ —Ä–æ–≥–∞–ª–∏–∫–∞." },
                    { name: "Ori and the Blind Forest", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j6c.jpg", desc: "–ö—Ä–∞—Å–∏–≤–∞—è –∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∏–≥—Ä–∞." },
                    { name: "Celeste", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j6d.jpg", desc: "–ü–ª–∞—Ç—Ñ–æ—Ä–º–µ—Ä —Å –≥–ª—É–±–æ–∫–∏–º —Å—é–∂–µ—Ç–æ–º." },
                    { name: "Bloodstained: Ritual of the Night", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j6e.jpg", desc: "–ù–∞—Å–ª–µ–¥–Ω–∏—Ü–∞ Castlevania." },
                    { name: "Ender Lilies", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co6n32.jpg", desc: "–ì—Ä—É—Å—Ç–Ω–∞—è –∏ –∫—Ä–∞—Å–∏–≤–∞—è –º–µ—Ç—Ä–æ–∏–¥–≤–∞–Ω–∏—è." },
                    { name: "Katana ZERO", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j64.jpg", desc: "–°—Ç–∏–ª—å–Ω—ã–π —ç–∫—à–µ–Ω —Å –≤—Ä–µ–º–µ–Ω–µ–º." },
                    { name: "Shadow Complex", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j6f.jpg", desc: "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –º–µ—Ç—Ä–æ–∏–¥–≤–∞–Ω–∏—è." },
                    { name: "Infernax", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co6n33.jpg", desc: "–†–µ—Ç—Ä–æ-—Å—Ç–∏–ª—å —Å –∫—Ä–æ–≤—å—é –∏ –¥–µ–º–æ–Ω–∞–º–∏." },
                    { name: "Monster Boy", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j6g.jpg", desc: "–¶–≤–µ—Ç–Ω–∞—è –∏ –≤–µ—Å—ë–ª–∞—è –º–µ—Ç—Ä–æ–∏–¥–≤–∞–Ω–∏—è." },
                    { name: "Unsighted", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co6n34.jpg", desc: "–ú–µ—Ç—Ä–æ–∏–¥–≤–∞–Ω–∏—è —Å —Ç–∞–π–º–µ—Ä–æ–º." },
                    { name: "Timespinner", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j6h.jpg", desc: "–í—Ä–µ–º—è, –º–∞–≥–∏—è –∏ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è." },
                    { name: "Dandara", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j6i.jpg", desc: "–£–Ω–∏–∫–∞–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ –º–µ—Ç—Ä–æ–∏–¥–≤–∞–Ω–∏–∏." },
                    { name: "Aeterna Noctis", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co6n35.jpg", desc: "–¢—ë–º–Ω–∞—è –∏ –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω–∞—è." },
                    { name: "The Messenger", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j6j.jpg", desc: "–°–º–µ–Ω–∞ –≤—Ä–µ–º–µ–Ω–∏ –∏ —Å—Ç–∏–ª–µ–π." },
                    { name: "Grime", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co6n36.jpg", desc: "–ñ–µ—Å—Ç–æ–∫–∞—è –∏ –º—Ä–∞—á–Ω–∞—è." }
                ]
            },
            psplus: {
                title: "–†–∞–∑–¥–∞—á–∏ PS Plus 2025",
                img: "https://images.unsplash.com/photo-1566647387313-9fda80c7c114?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                hasNotPlayed: false,
                games: [
                    { name: "–Ø–Ω–≤–∞—Ä—å 2025", img: "https://via.placeholder.com/60?text=Jan", desc: "–ò–≥—Ä–∞ –º–µ—Å—è—Ü–∞ ‚Äî —è–Ω–≤–∞—Ä—å." },
                    { name: "–§–µ–≤—Ä–∞–ª—å 2025", img: "https://via.placeholder.com/60?text=Feb", desc: "–ò–≥—Ä–∞ –º–µ—Å—è—Ü–∞ ‚Äî —Ñ–µ–≤—Ä–∞–ª—å." },
                    { name: "–ú–∞—Ä—Ç 2025", img: "https://via.placeholder.com/60?text=Mar", desc: "–ò–≥—Ä–∞ –º–µ—Å—è—Ü–∞ ‚Äî –º–∞—Ä—Ç." },
                    { name: "–ê–ø—Ä–µ–ª—å 2025", img: "https://via.placeholder.com/60?text=Apr", desc: "–ò–≥—Ä–∞ –º–µ—Å—è—Ü–∞ ‚Äî –∞–ø—Ä–µ–ª—å." },
                    { name: "–ú–∞–π 2025", img: "https://via.placeholder.com/60?text=May", desc: "–ò–≥—Ä–∞ –º–µ—Å—è—Ü–∞ ‚Äî –º–∞–π." },
                    { name: "–ò—é–Ω—å 2025", img: "https://via.placeholder.com/60?text=Jun", desc: "–ò–≥—Ä–∞ –º–µ—Å—è—Ü–∞ ‚Äî –∏—é–Ω—å." },
                    { name: "–ò—é–ª—å 2025", img: "https://via.placeholder.com/60?text=Jul", desc: "–ò–≥—Ä–∞ –º–µ—Å—è—Ü–∞ ‚Äî –∏—é–ª—å." },
                    { name: "–ê–≤–≥—É—Å—Ç 2025", img: "https://via.placeholder.com/60?text=Aug", desc: "–ò–≥—Ä–∞ –º–µ—Å—è—Ü–∞ ‚Äî –∞–≤–≥—É—Å—Ç." },
                    { name: "–°–µ–Ω—Ç—è–±—Ä—å 2025", img: "https://via.placeholder.com/60?text=Sep", desc: "–ò–≥—Ä–∞ –º–µ—Å—è—Ü–∞ ‚Äî —Å–µ–Ω—Ç—è–±—Ä—å." },
                    { name: "–û–∫—Ç—è–±—Ä—å 2025", img: "https://via.placeholder.com/60?text=Oct", desc: "–ò–≥—Ä–∞ –º–µ—Å—è—Ü–∞ ‚Äî –æ–∫—Ç—è–±—Ä—å." },
                    { name: "–ù–æ—è–±—Ä—å 2025", img: "https://via.placeholder.com/60?text=Nov", desc: "–ò–≥—Ä–∞ –º–µ—Å—è—Ü–∞ ‚Äî –Ω–æ—è–±—Ä—å." },
                    { name: "–î–µ–∫–∞–±—Ä—å 2025", img: "https://via.placeholder.com/60?text=Dec", desc: "–ò–≥—Ä–∞ –º–µ—Å—è—Ü–∞ ‚Äî –¥–µ–∫–∞–±—Ä—å." }
                ]
            },
            awards: {
                title: "Fan Games Awards",
                img: "https://images.unsplash.com/photo-1511311337426-d52ec26b41a6?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                isAward: true,
                categories: [
                    { name: "–ò–≥—Ä–∞ –≥–æ–¥–∞", games: [
                        { name: "Baldur's Gate 3", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co6m6u.jpg" },
                        { name: "The Witcher 3", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co1xqo.jpg" },
                        { name: "Elden Ring", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co6n2r.jpg" },
                        { name: "Hades", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co6n2t.jpg" },
                        { name: "Disco Elysium", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2i9w.jpg" },
                        { name: "Celeste", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j6d.jpg" },
                        { name: "Hollow Knight", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j68.jpg" },
                        { name: "Vampire Survivors", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co6n2u.jpg" },
                        { name: "Dead Cells", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5w.jpg" },
                        { name: "Metroid Dread", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co6n31.jpg" }
                    ] },
                    { name: "–ò–Ω–¥–∏-–∏–≥—Ä–∞ –≥–æ–¥–∞", games: [
                        { name: "Celeste", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j6d.jpg" },
                        { name: "Disco Elysium", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2i9w.jpg" },
                        { name: "Hollow Knight", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j68.jpg" },
                        { name: "Vampire Survivors", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co6n2u.jpg" }
                    ] },
                    { name: "–õ—É—á—à–∏–π –ú–ú–û –ø—Ä–æ–µ–∫—Ç", games: [
                        { name: "Final Fantasy XIV", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5r.jpg" },
                        { name: "World of Warcraft", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5p.jpg" },
                        { name: "Guild Wars 2", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5o.jpg" },
                        { name: "Black Desert Online", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5n.jpg" }
                    ] },
                    { name: "–õ—É—á—à–∞—è –≥–æ–Ω–∫–∞", games: [
                        { name: "Forza Horizon 5", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5m.jpg" },
                        { name: "Gran Turismo 7", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5l.jpg" },
                        { name: "Need for Speed: Heat", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5k.jpg" },
                        { name: "F1 23", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5j.jpg" }
                    ] },
                    { name: "–õ—É—á—à–∏–π —à—É—Ç–µ—Ä", games: [
                        { name: "Call of Duty: Modern Warfare II", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5i.jpg" },
                        { name: "Counter-Strike 2", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5h.jpg" },
                        { name: "Apex Legends", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5g.jpg" },
                        { name: "Halo Infinite", img: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2j5f.jpg" }
                    ] }
                ]
            }
        };

        let currentThemeKey = null;
        let gamesToVote = [];
        let currentIndex = 0;
        let assigned = { s: [], a: [], b: [], c: [], d: [], 'not-played': [] };
        let awardCategoryIndex = 0;
        let awardVotes = {};

        function showWelcome() {
            document.getElementById('app').innerHTML = `
                <div class="welcome-container">
                    <div class="logo-placeholder">LOGO</div>
                    <div>
                        <h1>–¢–∏—Ä-–ª–∏—Å—Ç –ò–≥—Ä</h1>
                        <p>–°–æ–∑–¥–∞–π —Å–≤–æ–π —Ç–∏—Ä-–ª–∏—Å—Ç –ø–æ –ª—é–±–∏–º—ã–º –∏–≥—Ä–∞–º</p>
                    </div>
                    <div class="welcome-actions">
                        <button class="start-btn" onclick="showThemeSelect()">–ù–∞—á–∞—Ç—å ‚Üí</button>
                        <button class="rules-btn" onclick="showRules()">üìú –ü—Ä–∞–≤–∏–ª–∞</button>
                    </div>
                </div>
            `;
        }

        function showRules() {
            document.getElementById('app').innerHTML = `
                <div class="rules-content">
                    <h3>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</h3>
                    <p>–û—Ü–µ–Ω–∏–≤–∞–π—Ç–µ –∏–≥—Ä—ã –ø–æ —Å–∏—Å—Ç–µ–º–µ —Ç–∏—Ä–æ–≤:</p>
                    <ul>
                        <li><strong>S</strong> ‚Äî Game of the Year, –∞–±—Å–æ–ª—é—Ç–Ω—ã–π —Ñ–∞–≤–æ—Ä–∏—Ç</li>
                        <li><strong>A</strong> ‚Äî –û—Ç–ª–∏—á–Ω–∞—è –∏–≥—Ä–∞, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–π—Ç–∏</li>
                        <li><strong>B</strong> ‚Äî –•–æ—Ä–æ—à–æ, –Ω–æ –Ω–µ –∏–¥–µ–∞–ª—å–Ω–æ</li>
                        <li><strong>C</strong> ‚Äî –¢–µ—Ä–ø–∏–º–æ, –º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å</li>
                        <li><strong>D</strong> ‚Äî –ú—É—Å–æ—Ä, –Ω–µ —Å—Ç–æ–∏—Ç —Ç—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è</li>
                        <li><strong>–ù–µ –∏–≥—Ä–∞–ª</strong> ‚Äî –≤—ã –Ω–µ –∏–≥—Ä–∞–ª–∏, –Ω–æ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å</li>
                        <li><strong>–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</strong> ‚Äî –æ—Ç–ª–æ–∂–∏—Ç—å –æ—Ü–µ–Ω–∫—É –Ω–∞ –ø–æ—Ç–æ–º (–∏–≥—Ä—ã —É–π–¥—É—Ç –≤ –∫–æ–Ω–µ—Ü —Å–ø–∏—Å–∫–∞)</li>
                    </ul>
                    <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É ¬´–ù–∞–∑–∞–¥¬ª, —á—Ç–æ–±—ã –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤—ã–±–æ—Ä.</p>
                    <p>–í—Å–µ –∏–≥—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ü–µ–Ω–µ–Ω—ã ‚Äî –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–º–µ—Å—Ç—è—Ç—Å—è –≤ –∫–æ–Ω–µ—Ü.</p>
                    <div class="nav-buttons" style="margin-top:30px;">
                        <button class="back-to-main-btn" onclick="showWelcome()">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
                        <button class="start-btn" onclick="showThemeSelect()">–ü–µ—Ä–µ–π—Ç–∏ –∫ –≤—ã–±–æ—Ä—É</button>
                    </div>
                </div>
            `;
        }

        function showThemeSelect() {
            let html = `<h2 style="text-align:center;margin:20px 0;">–í—ã–±–µ—Ä–∏ —Ç–µ–º—É:</h2><div class="theme-grid">`;
            for (const [key, theme] of Object.entries(THEMES)) {
                html += `
                    <div class="theme-card" onclick="startTheme('${key}')">
                        <img src="${theme.img || 'https://via.placeholder.com/120?text=' + theme.title}" class="theme-img" onerror="this.style.display='none';" />
                        <div class="theme-title">üéÆ ${theme.title}</div>
                    </div>
                `;
            }
            html += `</div>
                <div class="nav-buttons" style="margin-top:20px;">
                    <button class="back-to-main-btn" onclick="showWelcome()">–ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
                </div>`;
            document.getElementById('app').innerHTML = html;
        }

        function startTheme(themeKey) {
            currentThemeKey = themeKey;
            const theme = THEMES[themeKey];
            if (theme.isAward) {
                awardCategoryIndex = 0;
                awardVotes = {};
                showAwardCategory();
                return;
            }
            gamesToVote = [...theme.games];
            assigned = { s: [], a: [], b: [], c: [], d: [], 'not-played': [] };
            currentIndex = 0;
            renderGameScreen();
        }

        function renderGameScreen() {
            if (currentIndex >= gamesToVote.length) {
                renderResults();
                return;
            }

            const game = gamesToVote[currentIndex];
            const total = gamesToVote.length;
            const progressPercent = Math.round((currentIndex / total) * 100);
            const theme = THEMES[currentThemeKey]; // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: theme —Ç–µ–ø–µ—Ä—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞

            let buttonsHTML = `
                <button class="cat-btn s-btn" onclick="assign('s')">S</button>
                <button class="cat-btn a-btn" onclick="assign('a')">A</button>
                <button class="cat-btn b-btn" onclick="assign('b')">B</button>
                <button class="cat-btn c-btn" onclick="assign('c')">C</button>
                <button class="cat-btn d-btn" onclick="assign('d')">D</button>
            `;

            if (theme.hasNotPlayed) {
                buttonsHTML += `<button class="cat-btn not-played-btn" onclick="assign('not-played')">–ù–µ –∏–≥—Ä–∞–ª</button>`;
            }

            buttonsHTML += `<button class="cat-btn skip-btn" onclick="skipGame()">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>`;

            document.getElementById('app').innerHTML = `
                <div class="progress-bar-container">
                    <div class="progress-bar-fill" style="width: ${progressPercent}%;"></div>
                    <div class="trophy-marker" style="left: ${progressPercent}%;"></div>
                </div>
                <div class="progress-label">–ò–≥—Ä–∞ ${currentIndex + 1} –∏–∑ ${total}</div>
                <div class="game-card">
                    <div class="game-header">
                        <img src="${game.img}" class="game-img" onerror="this.style.display='none';" />
                        <div class="game-name">${game.name}</div>
                    </div>
                    <div class="game-desc">${game.desc}</div>
                    <div class="categories">
                        ${buttonsHTML}
                    </div>
                    <div class="nav-buttons">
                        ${currentIndex > 0 ? `<button class="back-btn" onclick="goBack()">‚Üê –ù–∞–∑–∞–¥</button>` : ''}
                        <button class="back-to-main-btn" onclick="showWelcome()">–ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
                    </div>
                </div>
            `;
        }

        function assign(category) {
            const game = gamesToVote[currentIndex];
            assigned[category].push(game);
            currentIndex++;
            renderGameScreen();
        }

        function skipGame() {
            const game = gamesToVote[currentIndex];
            gamesToVote.splice(currentIndex, 1);
            gamesToVote.push(game);
            renderGameScreen();
        }

        function goBack() {
            if (currentIndex > 0) {
                currentIndex--;
                for (let cat in assigned) {
                    if (assigned[cat].length > 0 && assigned[cat][assigned[cat].length - 1] === gamesToVote[currentIndex]) {
                        assigned[cat].pop();
                        break;
                    }
                }
                renderGameScreen();
            }
        }

        function renderResults() {
            const theme = THEMES[currentThemeKey];
            let html = `
                <div style="text-align:center;margin-bottom:20px;">
                    <h2>–¢–ò–†-–õ–ò–°–¢ "${theme.title}"</h2>
                </div>
            `;

            const tiers = [
                { key: 's', title: 'S', class: 'tier-s' },
                { key: 'a', title: 'A', class: 'tier-a' },
                { key: 'b', title: 'B', class: 'tier-b' },
                { key: 'c', title: 'C', class: 'tier-c' },
                { key: 'd', title: 'D', class: 'tier-d' },
                { key: 'not-played', title: '–ù–µ –∏–≥—Ä–∞–ª', class: 'tier-d' }
            ];

            tiers.forEach(t => {
                if (assigned[t.key] && assigned[t.key].length > 0) {
                    html += `<div class="tier-list">
                        <div class="tier-header ${t.class}">${t.title}</div>
                        <div class="tier-items">
                            ${assigned[t.key].map(g => `<div class="tier-item">${g.name}</div>`).join('')}
                        </div>
                    </div>`;
                }
            });

            html += `
                <div class="result-actions">
                    <button class="action-btn btn-theme" onclick="showThemeSelect()">–î—Ä—É–≥–∞—è —Ç–µ–º–∞</button>
                    <button class="action-btn btn-retry" onclick="startTheme('${currentThemeKey}')">–ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å</button>
                    <button class="action-btn btn-rating" onclick="showRating()">–†–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤</button>
                    <button class="action-btn btn-share" onclick="shareResult()">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
                </div>
                <div class="nav-buttons" style="margin-top:20px;">
                    <button class="back-to-main-btn" onclick="showWelcome()">–ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
                </div>
            `;

            document.getElementById('app').innerHTML = html;
        }

        // === –û–°–¢–ê–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò (showRating, showAwardCategory, etc.) ‚Äî –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ===
        // (–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –¥–ª—è –ø–æ–ª–Ω–æ—Ç—ã, –Ω–æ –æ—à–∏–±–æ–∫ –≤ –Ω–∏—Ö –Ω–µ—Ç)

        function showRating() {
            const theme = THEMES[currentThemeKey];
            if (theme.isAward) {
                showAwardRating();
                return;
            }
            let html = `
                <div style="text-align:center;margin-bottom:20px;">
                    <h2>–†–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤</h2>
                    <p>${theme.title}</p>
                </div>
                <div class="tier-list">
                    <div class="tier-header tier-s">S</div>
                    <div class="tier-items">
                        ${theme.games.map(g => {
                            const percent = Math.floor(Math.random() * 100);
                            const barColor = percent > 70 ? '#4caf50' : '#f44336';
                            return `
                                <div class="tier-item" style="display:flex;align-items:center;justify-content:space-between;padding:12px;background:#f9f9f9;margin-bottom:8px;border-radius:8px;">
                                    <span style="flex:1;">${g.name}</span>
                                    <div style="width:100px;height:8px;background:#eee;border-radius:4px;margin:0 10px;position:relative;">
                                        <div style="height:100%;border-radius:4px;position:absolute;left:0;top:0;width:${percent}%;background:${barColor};"></div>
                                    </div>
                                    <span style="font-weight:bold;">${percent}%</span>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
                <div class="nav-buttons" style="margin-top:20px;">
                    <button class="back-to-main-btn" onclick="renderResults()">–ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
                </div>
            `;
            document.getElementById('app').innerHTML = html;
        }

        function showAwardCategory() {
            const theme = THEMES[currentThemeKey];
            const category = theme.categories[awardCategoryIndex];
            if (!category) {
                renderAwardResults();
                return;
            }

            let html = `
                <div class="awards-card">
                    <div class="award-question">üèÜ ${category.name}</div>
                    <div class="award-games">
                        ${category.games.map(g => `
                            <div class="award-game" onclick="selectAwardGame('${g.name}')">
                                <img src="${g.img}" class="award-img" onerror="this.style.display='none';" />
                                <div class="award-game-name">${g.name}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                <div class="nav-buttons">
                    ${awardCategoryIndex > 0 ? `<button class="back-btn" onclick="goBackAward()">‚Üê –ù–∞–∑–∞–¥</button>` : ''}
                    <button class="back-to-main-btn" onclick="showWelcome()">–ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
                </div>
            `;
            document.getElementById('app').innerHTML = html;
        }

        function selectAwardGame(gameName) {
            const category = THEMES[currentThemeKey].categories[awardCategoryIndex];
            if (!category) return;
            awardVotes[category.name] = gameName;
            awardCategoryIndex++;
            showAwardCategory();
        }

        function goBackAward() {
            if (awardCategoryIndex > 0) {
                awardCategoryIndex--;
                delete awardVotes[THEMES[currentThemeKey].categories[awardCategoryIndex].name];
                showAwardCategory();
            }
        }

        function renderAwardResults() {
            const theme = THEMES[currentThemeKey];
            let html = `
                <div style="text-align:center;margin-bottom:20px;">
                    <h2>üèÜ Fan Games Awards</h2>
                </div>
            `;

            for (let cat in awardVotes) {
                html += `
                    <div class="tier-list">
                        <div class="tier-header tier-s">${cat}</div>
                        <div class="tier-items">
                            <div class="tier-item">${awardVotes[cat]}</div>
                        </div>
                    </div>
                `;
            }

            html += `
                <div class="result-actions">
                    <button class="action-btn btn-theme" onclick="showThemeSelect()">–î—Ä—É–≥–∞—è —Ç–µ–º–∞</button>
                    <button class="action-btn btn-retry" onclick="startTheme('${currentThemeKey}')">–ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å</button>
                    <button class="action-btn btn-rating" onclick="showAwardRating()">–†–µ–π—Ç–∏–Ω–≥</button>
                    <button class="action-btn btn-share" onclick="shareResult()">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
                </div>
                <div class="nav-buttons" style="margin-top:20px;">
                    <button class="back-to-main-btn" onclick="showWelcome()">–ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
                </div>
            `;

            document.getElementById('app').innerHTML = html;
        }

        function showAwardRating() {
            const theme = THEMES[currentThemeKey];
            let html = `
                <div style="text-align:center;margin-bottom:20px;">
                    <h2>–†–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤</h2>
                    <p>Fan Games Awards</p>
                </div>
            `;

            for (let i = 0; i < theme.categories.length; i++) {
                const category = theme.categories[i];
                html += `
                    <div class="tier-list">
                        <div class="tier-header tier-s">${category.name}</div>
                        <div class="tier-items">
                            ${category.games.map(g => {
                                const percent = Math.floor(Math.random() * 100);
                                const barColor = percent > 70 ? '#4caf50' : '#f44336';
                                return `
                                    <div class="tier-item" style="display:flex;align-items:center;justify-content:space-between;padding:12px;background:#f9f9f9;margin-bottom:8px;border-radius:8px;">
                                        <span style="flex:1;">${g.name}</span>
                                        <div style="width:100px;height:8px;background:#eee;border-radius:4px;margin:0 10px;position:relative;">
                                            <div style="height:100%;border-radius:4px;position:absolute;left:0;top:0;width:${percent}%;background:${barColor};"></div>
                                        </div>
                                        <span style="font-weight:bold;">${percent}%</span>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                `;
            }

            html += `
                <div class="nav-buttons" style="margin-top:20px;">
                    <button class="back-to-main-btn" onclick="renderAwardResults()">–ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
                </div>
            `;
            document.getElementById('app').innerHTML = html;
        }

        function shareResult() {
            const theme = THEMES[currentThemeKey];
            let text = "";

            if (theme.isAward) {
                text = generateShareTextAwards();
            } else {
                text = generateShareTextTiers();
            }

            navigator.clipboard.writeText(text).then(() => {
                alert('‚úÖ –¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!\n–û—Ç–ø—Ä–∞–≤—å –µ–≥–æ –≤ @GameTierListBot –∏–ª–∏ –ª—é–±–æ–π —á–∞—Ç.');
            }).catch(() => {
                alert('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é.');
            });
        }

        function generateShareTextTiers() {
            const theme = THEMES[currentThemeKey];
            let text = `üéÆ –¢–∏—Ä-–ª–∏—Å—Ç "${theme.title}"\n\n`;

            const tiers = [
                { key: 's', title: 'S' },
                { key: 'a', title: 'A' },
                { key: 'b', title: 'B' },
                { key: 'c', title: 'C' },
                { key: 'd', title: 'D' },
                { key: 'not-played', title: '–ù–µ –∏–≥—Ä–∞–ª' }
            ];

            tiers.forEach(t => {
                if (assigned[t.key] && assigned[t.key].length > 0) {
                    text += `üèÜ ${t.title}\n`;
                    assigned[t.key].forEach(game => {
                        text += `‚Ä¢ ${game.name}\n`;
                    });
                    text += `\n`;
                }
            });

            text += `\n–°–æ–±–µ—Ä–∏ —Å–≤–æ–π —Ç–∏—Ä-–ª–∏—Å—Ç –∏ –ø–æ–¥–µ–ª–∏—Å—å –∏–º –≤ @GameTierListBot –∏–ª–∏ –ª—é–±–æ–º —á–∞—Ç–µ.`;
            return text;
        }

        function generateShareTextAwards() {
            let text = `üèÜ Fan Games Awards\n\n`;

            for (let cat in awardVotes) {
                text += `üéñÔ∏è ${cat}\n`;
                text += `${awardVotes[cat]}\n\n`;
            }

            text += `\n–°–æ–±–µ—Ä–∏ —Å–≤–æ–π —Ç–∏—Ä-–ª–∏—Å—Ç –∏ –ø–æ–¥–µ–ª–∏—Å—å –∏–º –≤ @GameTierListBot –∏–ª–∏ –ª—é–±–æ–º —á–∞—Ç–µ.`;
            return text;
        }

        showWelcome();
    </script>
</body>
</html>